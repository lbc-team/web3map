# SHA-256

## 概念简介

SHA-256（Secure Hash Algorithm 256-bit）是 SHA-2 家族中最常用的哈希算法之一，由美国国家安全局（NSA）设计，2001 年由美国国家标准与技术研究院（NIST）发布为联邦信息处理标准（FIPS 180-2）。

SHA-256 接受任意长度的输入，产生固定 256 位（32 字节）的哈希值，通常表示为 64 个十六进制字符。

## 核心特性

**单向性**：从哈希值在计算上无法反推出原始输入，只能通过暴力枚举尝试。

**雪崩效应**：输入的微小变化（甚至一个比特）会导致输出完全不同。

**抗碰撞性**：在计算上不可能找到两个不同的输入产生相同的哈希值。SHA-256 的碰撞概率约为 2^(-256)，实际上不可能发生。

**确定性**：相同的输入总是产生相同的输出。

## 在比特币中的应用

**工作量证明（[PoW](https://learnblockchain.cn/tags/PoW)）核心**：比特币挖矿本质上是寻找满足特定条件的 SHA-256 哈希值。

**挖矿过程**：
1. 矿工构造区块头（包含前一区块哈希、交易 Merkle 根、时间戳、nonce 等）
2. 对区块头进行双重 SHA-256 哈希：SHA-256(SHA-256(block_header))
3. 检查哈希值是否小于当前难度目标（即前导零的数量）
4. 如果不满足，增加 nonce 重复尝试

**难度目标**：要求哈希值有 n 个前导零，例如：
- `0000000000000000000a1b2c...`（约 19 个前导零）
- 难度越高，要求的前导零越多

**难度调整**：比特币每 2016 个区块（约 2 周）调整一次难度，使平均出块时间保持在 10 分钟左右。

**区块链接**：每个区块包含前一区块的 SHA-256 哈希，形成不可篡改的链式结构。

## 其他应用场景

**数字签名**：在签名前对消息进行 SHA-256 哈希，缩短输入长度。

**数据完整性**：验证文件下载是否完整，通过比对哈希值。

**密码存储**：存储密码的 SHA-256 哈希而非明文（实际应用中通常使用加盐的专用算法如 bcrypt）。

**Merkle 树**：构建交易 Merkle 树，高效验证交易存在性。

**地址生成**：比特币地址生成过程中使用 SHA-256（配合 RIPEMD-160）。

## 安全性

**暴力破解难度**：SHA-256 有 2^256 种可能输出，即使每秒尝试 10^18 次（全球算力），平均需要数十亿年才能找到碰撞。

**抗量子性**：Grover 算法可以将搜索复杂度从 O(2^n) 降低到 O(2^(n/2))，即对 SHA-256 从 2^256 降至 2^128，但仍然安全。

**无已知弱点**：截至 2025 年，SHA-256 没有实际可行的攻击方法，被认为是安全的。

## SHA 家族对比

| 算法 | 输出长度 | 安全性 | 应用 |
|------|---------|--------|------|
| SHA-1 | 160 位 | 已破解 | 淘汰中 |
| SHA-256 | 256 位 | 安全 | 比特币、TLS |
| SHA-512 | 512 位 | 安全 | 高安全场景 |
| SHA-3 | 可变 | 安全 | 新标准 |

**SHA-1 已弃用**：2017 年 Google 演示了 SHA-1 碰撞攻击，现已不推荐使用。

## 性能考虑

**计算效率**：SHA-256 在软件实现中速度适中，现代 CPU 有专门的指令集（如 Intel SHA Extensions）加速计算。

**ASIC 挖矿**：比特币挖矿已被 ASIC（专用集成电路）主导，单台设备算力可达 100+ TH/s（每秒 10^14 次哈希）。

**能源消耗**：[比特币](https://learnblockchain.cn/tags/比特币?map=BTC)全网每年消耗约 150 TWh 电力（相当于一个中等国家），主要用于 SHA-256 计算。

## 推荐阅读

- [SHA-2 - 维基百科](https://zh.wikipedia.org/wiki/SHA-2)
- [比特币挖矿原理详解 - 登链社区](https://learnblockchain.cn/article/1586)
- [深入理解比特币PoW算法 - 知乎](https://zhuanlan.zhihu.com/p/108510740)
- [SHA-256 explained - YouTube Computerphile](https://www.youtube.com/watch?v=S9JGmA5_unY)

## 相关概念

- **[比特币](https://learnblockchain.cn/tags/比特币?map=BTC)挖矿**
- **工作量证明**
- **哈希函数**
- **Merkle树**
- **nonce**
- **难度调整**
