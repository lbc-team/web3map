## EIP712

EIP712 是一个[以太坊](https://learnblockchain.cn/tags/以太坊?map=EVM)改进提案，用于在[以太坊](https://learnblockchain.cn/tags/以太坊?map=EVM)区块链上实现更安全、标准化的结构化数据签名。EIP712提案定义了一种方法，通过定义清晰的结构化数据格式（人类友好可读）来构建和签名数据，从而减少签名时出错的风险，并增强用户体验和安全性。



> Tip: EIP712 提案的背景
>
> 在[以太坊](https://learnblockchain.cn/tags/以太坊?map=EVM)区块链上，签名是非常常见的操作。用户需要对交易、授权以及其他操作进行签名，以证明他们的身份并授权操作。然而，在传统的签名方法中，用户通常需要签名一串难以理解的哈希数据，这带来了以下几个问题：
>
> **可读性差**：用户签名的数据是哈希值或原始的十六进制字符串，这些数据对普通用户而言难以理解，增加了用户误签或被欺骗的风险。
>
> **安全性问题**：由于用户难以理解签名的数据，恶意合约或应用可能诱导用户签署不安全或不合法的交易。
>
> **开发复杂性**：开发者需要在不同的应用和场景中重复实现签名和验证逻辑，这增加了开发的复杂性和潜在的错误风险。



###  EIP712 如何工作

1. **定义域（Domain）**：指定签名的数据所属的域信息，包括名称、版本、链 ID 和验证合约地址等。域信息确保签名数据的唯一性和防篡改性。
2. **定义数据结构（Type Definitions）**：明确需要签名的数据类型和结构。这些类型和结构通过 EIP712 标准化，使得签名数据具有一致性和可读性。
3. **生成哈希**：根据定义的数据结构和域信息生成数据哈希值
4. **签名数据**：对生成的哈希值进行签名。



使用方法可参考 [详解EIP712链下签名](https://learnblockchain.cn/article/8260) 。

