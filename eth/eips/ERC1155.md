## ERC-1155

### 概念简介

ERC-1155 是以太坊的多代币标准，由 Enjin 团队于 2018 年提出。这个创新标准允许单个智能合约同时管理多种类型的代币——包括同质化代币（Fungible Tokens）、非同质化代币（NFTs）以及半同质化代币（Semi-Fungible Tokens）的任意组合。

与 ERC-20 和 ERC-721 需要为每种代币部署独立合约不同，ERC-1155 实现了"一个合约管理所有代币"的高效模式，大幅降低了部署成本和交易费用。

### 核心特性

**多代币统一管理**
ERC-1155 可以在一个合约中定义和管理无限种类的代币：
- 同质化代币：如游戏货币、资源（当供应量 > 1 时）
- 非同质化代币：如独特装备、艺术品（当供应量 = 1 时）
- 半同质化代币：如限量版道具（供应量介于两者之间）

**批量操作**
ERC-1155 的关键优势在于支持批量操作：
- **批量转移**：在单次调用中转移多个资产
- **批量余额查询**：一次获取多个资产的余额
- **批量审批**：批准所有代币到一个地址

这些批量操作显著降低了 Gas 费用，尤其适合需要频繁交易多种资产的场景。

**NFT 支持**
当某个代币 ID 的供应量仅为 1 时，它本质上就是一个 NFT。ERC-1155 支持定义元数据 URL，就像 ERC-721 那样，可以关联图片、描述等链下数据。

**原子交换**
由于所有代币都在同一个合约中，ERC-1155 天然支持原子化的多资产交换，无需复杂的跨合约调用。

### 核心接口

ERC-1155 标准定义了以下主要函数：

**转账函数**
```solidity
function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)
function safeBatchTransferFrom(address from, address to, uint256[] ids, uint256[] amounts, bytes data)
```

**查询函数**
```solidity
function balanceOf(address account, uint256 id) returns (uint256)
function balanceOfBatch(address[] accounts, uint256[] ids) returns (uint256[])
```

**授权函数**
```solidity
function setApprovalForAll(address operator, bool approved)
function isApprovedForAll(address account, address operator) returns (bool)
```

### 应用场景

**区块链游戏**
这是 ERC-1155 最广泛的应用领域。游戏通常需要：
- 游戏货币（同质化代币）
- 消耗品和资源（半同质化代币）
- 独特装备和皮肤（NFT）

ERC-1155 完美满足这些需求，玩家可以在一次交易中转移所有道具，大幅优化游戏体验。

**NFT 市场**
OpenSea、Rarible 等 NFT 市场全面支持 ERC-1155，创作者可以发行限量版作品（如 100 份相同的版画），同时也能铸造独一无二的艺术品。

**去中心化金融（DeFi）**
一些 DeFi 协议使用 ERC-1155 表示金融头寸，如 Uniswap V3 的流动性头寸 NFT。

**元宇宙**
Decentraland、The Sandbox 等元宇宙项目使用 ERC-1155 管理虚拟土地、建筑材料和装饰物品。

### 与其他标准对比

**vs ERC-20**
- ERC-20：每个代币类型一个合约，只能表示同质化资产
- ERC-1155：一个合约管理多种代币，支持批量操作

**vs ERC-721**
- ERC-721：每个 NFT 独立管理，转移多个 NFT 需要多笔交易
- ERC-1155：批量转移多个 NFT，Gas 效率更高

**综合优势**
ERC-1155 = ERC-20 + ERC-721 + 批量操作 + 更低成本

### 知名项目

- **Enjin**：ERC-1155 的创始者，游戏生态平台
- **OpenSea**：最大的 NFT 市场，全面支持 ERC-1155
- **Axie Infinity**：部分游戏道具采用 ERC-1155
- **The Sandbox**：元宇宙游戏，使用 ERC-1155 管理虚拟资产
- **Uniswap V3**：流动性头寸使用 ERC-1155 的变体

### 发展展望

ERC-1155 已成为 NFT 和游戏领域的行业标准。随着区块链游戏和元宇宙的兴起，这个标准的重要性将继续提升。未来的演进方向包括：
- 更高级的批量操作优化
- 与 Layer 2 解决方案的深度集成
- 支持动态 NFT 和可组合资产
- 跨链 ERC-1155 资产桥接

ERC-1155 证明了"少即是多"的设计哲学，通过统一接口实现了更高的效率和更低的成本，为 Web3 应用提供了强大的基础设施。

### 相关链接

- [ERC-1155 官方文档](https://ethereum.org/en/developers/docs/standards/tokens/erc-1155/)
- [ERC-1155 详解 - 登链社区](https://learnblockchain.cn/article/10524)
- [NFT 协议标准梳理](https://www.jinse.cn/blockchain/1146156.html)
- [代币标准对比](https://learnblockchain.cn/article/4170)
