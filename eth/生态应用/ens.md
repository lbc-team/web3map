# ENS (Ethereum Name Service)

## 概念简介

ENS（Ethereum Name Service，以太坊域名服务）是一个基于以太坊区块链的分布式、开放和可扩展的命名系统。它的核心功能是将人类可读的名称（如 `alice.eth`）解析为机器可读的标识符，如以太坊地址、其他加密货币地址、内容哈希（用于 IPFS 网站）和元数据。

ENS 类似于互联网中的 DNS（域名系统），但它不依赖于中心化的服务器，而是完全运行在以太坊智能合约上，具有去中心化、抗审查和可编程的特性。

## 核心机制与架构

ENS 的架构主要由三个核心组件构成：

### 1. 注册表 (The Registry)
这是 ENS 的核心智能合约，维护所有域名和子域名的列表。对于每个域名，注册表存储三项关键信息：
- **域名所有者 (Owner)**：域名的管理者，可以是外部账户或智能合约。所有者可以设置解析器、修改 TTL、转让所有权。
- **解析器地址 (Resolver)**：负责处理该域名具体解析请求的合约地址。
- **缓存生存时间 (TTL)**：客户端缓存记录的时间。

### 2. 解析器 (Resolvers)
解析器是实际执行名称到地址（或地址到名称）转换的智能合约。
- **正向解析**：`alice.eth` -> `0x123...`。
- **反向解析**：`0x123...` -> `alice.eth`。
- **多资源支持**：一个解析器可以存储多种类型的记录，包括 ETH 地址、BTC 地址、IPFS 内容哈希、电子邮件、头像 URL 等。

### 3. 注册控制器 (Registrars)
注册控制器是负责分配和管理特定顶级域名（如 `.eth`）下子域名的智能合约。
- **.eth 注册器**：目前采用基于 ERC-721 的 NFT 标准。用户注册 `.eth` 域名实际上是铸造了一个 NFT。这使得域名可以在 OpenSea 等 NFT 市场上自由交易。
- **租金机制**：为了防止域名抢注和死锁，`.eth` 域名需要支付年费（租金）。租金收入通常进入 ENS DAO 的资金库。

## 主要特点

- **去中心化身份 (DID)**：ENS 不仅仅是地址别名，它正逐渐成为 Web3 用户的通用用户名和身份配置文件。
- **跨平台兼容**：几乎所有的主流钱包（MetaMask, Rainbow）和 dApp 都原生支持 ENS 解析。
- **完全的所有权**：用户拥有域名的完全控制权，没人能撤销或封锁（只要按时续费）。
- **DNS 集成**：ENS 支持将传统的 DNS 域名（如 `.com`, `.org`）导入到以太坊生态中使用，前提是用户能证明其拥有权（DNSSEC）。

## 治理

ENS 由 ENS DAO 管理。ENS 代币持有者可以对协议的关键决策进行投票，包括：
- 注册费用的定价和资金库分配。
- 价格预言机的选择。
- 注册控制器的升级。

## 相关概念

- **IPFS + ENS**：构建去中心化网站的黄金组合。ENS 指向 IPFS 哈希，实现完全去中心化的内容发布。
- **子域名 (Subdomains)**：域名所有者可以免费无限制地创建子域名（如 `pay.alice.eth`），并将其分配给其他人使用。

## 推荐阅读

- [ENS 文档](https://docs.ens.domains/)
- [EIP-137: Ethereum Domain Name Service - Specification](https://eips.ethereum.org/EIPS/eip-137)
