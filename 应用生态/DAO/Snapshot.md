# Snapshot

## 概念简介

Snapshot是一个去中心化的链下治理投票平台，为DAO（去中心化自治组织）和DeFi协议提供简单、免费且透明的社区投票解决方案。它于2020年推出，由Balancer团队孵化，现已成为Web3生态中最流行的治理工具之一。

Snapshot的核心优势在于其链下投票机制——用户可以无需支付Gas费用即可参与提案投票，同时保持投票结果的公开透明和可验证性。投票权重通常基于用户在特定区块高度持有的代币数量，通过加密签名验证投票者身份，确保投票的真实性和不可篡改性。

截至2024年，Snapshot已服务超过15,000个DAO组织，处理了超过500万次投票，成为Web3治理基础设施的重要组成部分。从Uniswap、Aave到ENS，几乎所有主流DeFi协议都采用Snapshot作为其社区治理平台。

## 核心特性

### 1. 无Gas费用投票

用户通过钱包签名参与投票，无需支付任何链上交易费用，大大降低了参与门槛。

### 2. 灵活的投票策略

支持多种投票权重计算方式：
- 代币余额投票
- 流动性池份额投票  
- NFT持有数量投票
- 委托投票权重
- 多策略组合

### 3. 快照机制

在提案创建时记录特定区块高度的代币持有情况，防止投票期间的代币转移影响投票结果。

### 4. 多链支持

支持以太坊、BSC、Polygon、Arbitrum、Optimism等40多条区块链网络。

### 5. 可定制化空间

每个DAO可以创建独立的Snapshot Space，自定义品牌、投票策略、提案模板等。

### 6. IPFS存储

所有提案和投票结果都存储在IPFS上，确保数据的永久性和抗审查性。

### 7. 集成生态

与Gnosis Safe、Tally、Discord、Telegram等工具深度集成，实现完整的治理工作流。

## 核心优势

### 1. 成本效益

完全免费的投票机制极大提升了社区参与度，特别是在Gas费用高昂时期。

### 2. 快速部署

创建Snapshot Space只需几分钟，无需部署智能合约或复杂的技术配置。

### 3. 安全可靠

基于EIP-712标准的签名验证，确保投票的真实性和防篡改性。

### 4. 高度可扩展

支持数十万用户同时投票，不受区块链TPS限制。

### 5. 透明度

所有投票记录公开可查，任何人都可以验证投票结果的准确性。

### 6. 灵活的治理框架

支持单选、多选、加权投票、二次方投票等多种投票类型。

## 工作原理

### 投票流程

1. **提案创建**：
   - DAO管理员或符合条件的成员创建提案
   - 设置投票策略、开始/结束时间、选项等
   - 提案内容存储到IPFS

2. **快照生成**：
   - 系统记录特定区块高度时所有地址的代币持有量
   - 计算每个地址的投票权重

3. **用户投票**：
   - 用户使用钱包对投票选项进行签名
   - 签名消息包含提案ID、选择和时间戳
   - 无需发送链上交易

4. **结果计算**：
   - 系统汇总所有有效投票
   - 根据预设策略计算加权结果
   - 结果实时更新并公开展示

5. **执行（可选）**：
   - 对于链上执行的提案，通过Gnosis Safe等多签钱包执行
   - 或使用Snapshot X（链上验证的版本）自动执行

### 投票策略示例

```javascript
// ERC20代币余额策略
{
  "name": "erc20-balance-of",
  "params": {
    "address": "0x...",  // 代币合约地址
    "symbol": "TOKEN",
    "decimals": 18
  }
}

// 委托投票策略
{
  "name": "delegation",
  "params": {
    "symbol": "TOKEN",
    "strategies": [...]  // 底层策略
  }
}
```

## 主要功能

### 1. 提案管理

- 创建和编辑提案
- 设置投票周期和法定人数
- 支持Markdown格式和富文本
- 提案讨论和评论

### 2. 投票类型

- **单选投票**：选择一个选项
- **批准投票**：选择多个选项
- **加权投票**：为每个选项分配权重
- **二次方投票**：抑制大户影响力
- **排名选择投票**：按优先级排序

### 3. 委托功能

用户可以将投票权委托给信任的代表，增强治理效率。

### 4. 插件系统

- **Gnosis Safe插件**：直接从Safe执行提案
- **Discord机器人**：提案通知和投票提醒
- **API接口**：集成到自定义应用

### 5. Snapshot X

新一代产品，支持链上执行和更复杂的治理场景。

## 典型用例

### DeFi协议治理

- **Uniswap**：治理参数调整、新链部署决策
- **Aave**：风险参数修改、新资产上线投票
- **Curve**：流动性挖矿权重投票
- **Balancer**：协议费用分配决策

### NFT社区

- **BAYC**：社区基金使用提案
- **Nouns DAO**：每日拍卖和基金支出

### Layer2和基础设施

- **Optimism**：RetroPGF资金分配
- **Arbitrum**：生态系统发展方向
- **ENS**：域名注册规则修改

### 投资DAO

- **BitDAO**：投资决策和资金分配
- **PleasrDAO**：艺术品购买投票

## 应用场景

### 1. 协议参数治理

调整费率、利率、抵押率等关键参数。

### 2. 资金分配

决定国库资金的使用方式和grant分配。

### 3. 生态发展

投票决定新功能开发、合作伙伴选择、营销活动等。

### 4. 紧急响应

快速收集社区意见应对安全事件或市场波动。

### 5. 软治理信号

收集社区偏好和意见，为后续链上执行提供依据。

## 与链上治理对比

| 特性 | Snapshot（链下） | 链上治理 |
|------|-----------------|----------|
| Gas费用 | 免费 | 需要支付 |
| 投票速度 | 即时 | 需要等待区块确认 |
| 可扩展性 | 无限 | 受TPS限制 |
| 自动执行 | 需要额外步骤 | 可以自动执行 |
| 安全性 | 签名验证 | 智能合约验证 |
| 部署成本 | 无 | 需要部署合约 |
| 适用场景 | 信号收集、初步投票 | 关键决策、自动执行 |

## 最佳实践

### 1. 提案设计

- 清晰描述提案目标和影响
- 提供充分的背景信息和数据支持
- 设置合理的投票周期（通常5-7天）

### 2. 投票策略

- 根据项目特点选择合适的策略
- 考虑设置最低投票门槛防止女巫攻击
- 使用委托机制提高参与率

### 3. 社区沟通

- 在Discord/Forum预热讨论
- 使用机器人推送投票提醒
- 提案结束后及时执行和反馈

### 4. 安全考虑

- 验证Space配置的准确性
- 对重大提案进行多轮投票确认
- 结合Gnosis Safe等多签执行

## 局限性

### 1. 执行依赖

投票结果需要人工或多签执行，可能出现投票通过但未执行的情况。

### 2. 低参与度

免费投票虽然降低门槛，但可能导致参与度不如链上投票（有Gas成本筛选）。

### 3. 女巫攻击风险

需要合理设置投票策略和门槛防止恶意刷票。

### 4. 快照时间依赖

投票权重基于历史快照，无法反映实时代币分布。

## 未来发展

### Snapshot X

- 支持链上验证和自动执行
- 集成更多DeFi协议
- 提供更强大的治理工具包

### Shutter集成

与Shutter Network合作实现抗MEV的隐私投票。

### AI治理助手

利用AI分析提案影响和社区情绪。

## 相关链接

- [Snapshot官网](https://snapshot.org/)
- [Snapshot文档](https://docs.snapshot.org/)
- [Snapshot GitHub](https://github.com/snapshot-labs)
- [Snapshot X](https://snapshotx.xyz/)
- [治理最佳实践](https://docs.snapshot.org/guides/best-practices)
